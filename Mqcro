local player = game.Players.LocalPlayer
local backpack = player.Backpack
local UIS = game:GetService("UserInputService")
local mouse = player:GetMouse()

-- UI Setup
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = player:WaitForChild("PlayerGui")
screenGui.Name = "FarmingUI"

local mainFrame = Instance.new("Frame")
mainFrame.Parent = screenGui
mainFrame.Size = UDim2.new(0, 300, 0, 150)
mainFrame.Position = UDim2.new(0, 50, 0, 50)
mainFrame.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
mainFrame.Draggable = true
mainFrame.Active = true

local startButton = Instance.new("TextButton")
startButton.Parent = mainFrame
startButton.Size = UDim2.new(0, 200, 0, 50)
startButton.Position = UDim2.new(0, 50, 0, 50)
startButton.Text = "Start Auto Farming"
startButton.BackgroundColor3 = Color3.fromRGB(120, 255, 120)

local statusLabel = Instance.new("TextLabel")
statusLabel.Parent = mainFrame
statusLabel.Size = UDim2.new(0, 200, 0, 30)
statusLabel.Position = UDim2.new(0, 50, 0, 110)
statusLabel.Text = "Status: Idle"
statusLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)

local farming = false

-- Function to press keybinds (Q and E)
local function pressKey(key)
    local input = Instance.new("InputObject")
    input.UserInputType = Enum.UserInputType.Keyboard
    input.KeyCode = key
    UIS.InputBegan:Fire(input)
end

-- Function to move in circles around a position
local function moveInCircles()
    local position = Vector3.new(0, 5, 1)
    local radius = 100
    local speed = 1
    local angle = 0

    local hrp = player.Character:WaitForChild("HumanoidRootPart")
    local humanoid = player.Character:WaitForChild("Humanoid")

    while farming do
        -- Calculate new target position in a circle
        local x = math.cos(angle) * radius + position.X
        local z = math.sin(angle) * radius + position.Z

        -- Move towards the target position
        humanoid:MoveTo(Vector3.new(x, position.Y, z))

        -- Update angle for the next position
        angle = angle + math.rad(speed)

        wait(0.1)  -- Adjust the wait time for smooth movement
    end
end

-- Equip Hellfire Sword (Ensure it exists in Backpack)
local function equipHellfireSword()
    local sword = backpack:FindFirstChild("Hellfire")
    if sword then
        -- Equip the Hellfire sword if it's in the backpack
        local humanoid = player.Character:WaitForChild("Humanoid")
        humanoid:EquipTool(sword)
    else
        print("Hellfire sword not found in backpack!")
    end
end

-- Auto farm actions
local function autoFarm()
    while farming do
        -- Equip Sword
        equipHellfireSword()

        -- Use abilities if sword exists
        local sword = player.Character:FindFirstChild("Hellfire")
        if sword then
            local overAbility = sword:FindFirstChild("over")
            local wrathAbility = sword:FindFirstChild("wrath")
            
            -- Use 'over' ability if it exists
            if overAbility then
                overAbility:Activate()
            end

            -- Use 'wrath' ability if it exists
            if wrathAbility then
                wrathAbility:Activate()
            end
        end

        -- Press Q and E keybinds every 2 seconds
        pressKey(Enum.KeyCode.Q)
        pressKey(Enum.KeyCode.E)
        
        wait(2) -- Wait before using abilities again
    end
end

-- UI Button Toggle
startButton.MouseButton1Click:Connect(function()
    farming = not farming
    if farming then
        startButton.Text = "Stop Auto Farming"
        statusLabel.Text = "Status: Farming"
        task.spawn(moveInCircles)  -- Start the movement
        autoFarm()  -- Start farming actions
    else
        startButton.Text = "Start Auto Farming"
        statusLabel.Text = "Status: Idle"
    end
end)
