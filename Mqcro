-- Create UI
local player = game.Players.LocalPlayer
local screenGui = Instance.new("ScreenGui", player.PlayerGui)
screenGui.Name = "AutoFarmUI"

local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 200, 0, 50)
button.Position = UDim2.new(0, 0, 0, 0)
button.Text = "ENABLE AUTO FARM"
button.BackgroundColor3 = Color3.fromRGB(50, 150, 50)
button.TextColor3 = Color3.fromRGB(255, 255, 255)
button.Parent = screenGui

local statusLabel = Instance.new("TextLabel")
statusLabel.Size = UDim2.new(0, 200, 0, 50)
statusLabel.Position = UDim2.new(0, 0, 0, 60)
statusLabel.Text = "Status: Idle"
statusLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
statusLabel.TextColor3 = Color3.fromRGB(0, 0, 0)
statusLabel.Parent = screenGui

-- Target position
local targetPosition = Vector3.new(0, 5, 1) -- The initial target position
local radius = 100 -- Radius for walking in circles
local walkingSpeed = 16 -- Speed of walking, change if needed

-- Sword and Abilities
local sword = player.Backpack:WaitForChild("Hellfire")
local wrathAbility = sword:WaitForChild("wrath")
local overAbility = sword:WaitForChild("over")

-- Function to Equip Sword
local function equipSword()
    local swordItem = player.Backpack:FindFirstChild("Hellfire")
    if swordItem then
        swordItem.Parent = player.Character
    end
end

-- Walk in Circle Function
local function walkInCircle()
    local angle = 0
    while true do
        angle = angle + math.pi / 50
        local x = targetPosition.X + radius * math.cos(angle)
        local z = targetPosition.Z + radius * math.sin(angle)

        -- Set character position
        local character = player.Character
        local humanoid = character:WaitForChild("Humanoid")
        local targetPos = Vector3.new(x, targetPosition.Y, z)
        
        humanoid:MoveTo(targetPos)
        
        wait(0.1) -- Adjust if you want smoother movement
    end
end

-- Keybinds for Abilities (Q and E)
local function useAbilities()
    while true do
        -- Use Q and E
        game:GetService("UserInputService"):SendKeyEvent(true, Enum.KeyCode.Q, false, game)
        wait(1)
        game:GetService("UserInputService"):SendKeyEvent(false, Enum.KeyCode.Q, false, game)
        
        wait(1)

        game:GetService("UserInputService"):SendKeyEvent(true, Enum.KeyCode.E, false, game)
        wait(1)
        game:GetService("UserInputService"):SendKeyEvent(false, Enum.KeyCode.E, false, game)
        
        wait(2) -- Delay for 2 seconds before using the abilities again
    end
end

-- Button Toggle Auto Farm
local farming = false
button.MouseButton1Click:Connect(function()
    farming = not farming

    if farming then
        button.Text = "DISABLE AUTO FARM"
        button.BackgroundColor3 = Color3.fromRGB(120, 255, 120) -- Bright Green
        statusLabel.Text = "Status: Farming"
        
        -- Equip sword and start walking
        equipSword()
        task.spawn(walkInCircle)
        task.spawn(useAbilities)
    else
        button.Text = "ENABLE AUTO FARM"
        button.BackgroundColor3 = Color3.fromRGB(50, 150, 50) -- Dark Green
        statusLabel.Text = "Status: Idle"
    end
end)

-- Handle Death and Auto-Equip Sword
game.Players.LocalPlayer.CharacterAdded:Connect(function(character)
    local backpack = game.Players.LocalPlayer.Backpack
    if backpack:FindFirstChild("Hellfire") then
        equipSword() -- Re-equip the sword after death
    end
end)
