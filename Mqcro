-- UI Elements (Do not change the UI, these are just references)
local button = script.Parent:WaitForChild("Button") -- Adjust UI elements as needed
local statusLabel = script.Parent:WaitForChild("StatusLabel")

-- Player and Backpack setup
local player = game.Players.LocalPlayer
local backpack = player.Backpack
local hellfire = backpack:WaitForChild("Hellfire")

-- Target position and radius for movement
local targetPosition = Vector3.new(0, 5, 1)  -- Set your position here
local radius = 100
local isMoving = false
local farming = false

-- Function to equip the Hellfire sword
local function equipSword()
    local sword = backpack:FindFirstChild("Hellfire")
    if sword then
        -- Equip the Hellfire sword if not already equipped
        if player.Character and player.Character:FindFirstChild("RightHand") then
            sword.Parent = player.Character
            sword.Handle.CFrame = player.Character.RightHand.CFrame
        end
    end
end

-- Function to use the sword abilities
local function useAbilities()
    local sword = backpack:FindFirstChild("Hellfire")
    if sword then
        local over = sword:FindFirstChild("over")
        local wrath = sword:FindFirstChild("wrath")
        if over then
            over:FireServer()  -- Trigger 'over' ability
        end
        if wrath then
            wrath:FireServer()  -- Trigger 'wrath' ability
        end
    end
end

-- Simulate touch on screen every 2 seconds
local function simulateTouch()
    while farming do
        -- You can adjust the position of the touch if necessary
        local touchPos = Vector2.new(0.5, 0.5)  -- Adjust for touch on the center
        local touchInput = Instance.new("InputObject", game)
        touchInput.Position = touchPos
        game:GetService("UserInputService").InputChanged:Fire(touchInput)
        wait(2)  -- Simulate touch every 2 seconds
    end
end

-- Movement in circles
local function moveInCircle()
    local angle = math.rad(0)
    while isMoving do
        local x = targetPosition.X + math.sin(angle) * radius
        local z = targetPosition.Z + math.cos(angle) * radius
        player.Character:MoveTo(Vector3.new(x, targetPosition.Y, z))
        angle = angle + math.rad(2)  -- Adjust the speed of the circle movement
        wait(0.1)
    end
end

-- Toggle the auto farm state
local function toggleFarm()
    farming = not farming
    if farming then
        -- Equip sword and start the movement
        equipSword()
        statusLabel.Text = "Status: Farming"
        button.Text = "STOP FARMING"
        button.BackgroundColor3 = Color3.fromRGB(120, 255, 120)  -- Bright Green
        isMoving = true
        moveInCircle()
        -- Start abilities
        while farming do
            useAbilities()
            wait(2) -- Adjust the wait time if needed to prevent spamming abilities
        end
        -- Start simulating touch every 2 seconds
        simulateTouch()
    else
        isMoving = false
        statusLabel.Text = "Status: Idle"
        button.Text = "START FARMING"
        button.BackgroundColor3 = Color3.fromRGB(50, 150, 50)  -- Dark Green
    end
end

-- Button Toggle Auto Farm
button.MouseButton1Click:Connect(function()
    toggleFarm()
end)
